# Script adapted to Cree

# Pick AN lemmas
egrep -v '^\!' ../../../src/morphology/stems/nouns.lexc |cut -d ' ' -f1,2 |grep ' AN' |egrep -v '(^\-|PL)' |  tr '+:' ' ' | cut -d ' ' -f1 > ANnounlemmas

# Pick AN -PL lemmas
egrep -v '^\!' ../../../src/morphology/stems/nouns.lexc |cut -d ' ' -f1,2 |grep ' AN.*PL' |egrep -v '^\-' |  tr '+:' ' ' | cut -d ' ' -f1 > plANnounlemmas

# Pick IN lemmas
egrep -v '^\!' ../../../src/morphology/stems/nouns.lexc |cut -d ' ' -f1,2 |grep ' IN' |egrep -v '(^\-|PL)' |  tr '+:' ' ' | cut -d ' ' -f1 > INnounlemmas

# Pick IN PL lemmas
egrep -v '^\!' ../../../src/morphology/stems/nouns.lexc |cut -d ' ' -f1,2 |grep ' IN.*PL' |egrep -v '^\-' |  tr '+:' ' ' | cut -d ' ' -f1 > plINnounlemmas

# Generate dependent lemmas in Poss Px1Sg, and add to lemmaslist
egrep -v '^\!' ../../../src/morphology/stems/nouns.lexc |cut -d ' ' -f1,2 |egrep '^\-.* (AN_KIN|AN_DIMPOSS)' |grep -v 'PL' |  tr '+:' ' ' | cut -d ' ' -f1 |sed 's/$/+N+AN+Sg+Px1Sg/' | $LOOKUP $GTHOME/langs/crk/src/generator-gt-norm.xfst |cut -f2 >  noungenlemmas  
egrep -v '^\!' ../../../src/morphology/stems/nouns.lexc |cut -d ' ' -f1,2 |grep '^\-.* AN_KIN.*PL' |  tr '+:' ' ' | cut -d ' ' -f1 |sed 's/$/+N+AN+Pl+Px1Sg/' | $LOOKUP $GTHOME/langs/crk/src/generator-gt-norm.xfst |cut -f2 >>  noungenlemmas  
egrep -v '^\!' ../../../src/morphology/stems/nouns.lexc |cut -d ' ' -f1,2 |grep '^\-.* IN_DEP' |grep -v 'PL' |  tr '+:' ' ' | cut -d ' ' -f1 |sed 's/$/+N+IN+Sg+Px1Sg/' | $LOOKUP $GTHOME/langs/crk/src/generator-gt-norm.xfst |cut -f2 >>  noungenlemmas  
egrep -v '^\!' ../../../src/morphology/stems/nouns.lexc |cut -d ' ' -f1,2 |grep '^\-.* IN_DEP.*PL' |grep -v 'PL' |  tr '+:' ' ' | cut -d ' ' -f1 |sed 's/$/+N+IN+Pl+Px1Sg/' | $LOOKUP $GTHOME/langs/crk/src/generator-gt-norm.xfst |cut -f2 >>  noungenlemmas  


# Generate independent lemmas
cat ANnounlemmas |sed 's/$/+N+AN+Sg/' |$LOOKUP $GTHOME/langs/crk/src/generator-gt-norm.xfst |cut -f2 >> noungenlemmas
cat INnounlemmas |sed 's/$/+N+IN+Sg/' |$LOOKUP $GTHOME/langs/crk/src/generator-gt-norm.xfst |cut -f2 >> noungenlemmas
cat plANnounlemmas |sed 's/$/+N+AN+Pl/' |$LOOKUP $GTHOME/langs/crk/src/generator-gt-norm.xfst |cut -f2 >> noungenlemmas
cat plINnounlemmas |sed 's/$/+N+IN+Pl/' |$LOOKUP $GTHOME/langs/crk/src/generator-gt-norm.xfst |cut -f2 >> noungenlemmas

# Pick dependent lemmas' Px1Sg form (is comment in stems file) :
egrep -v '^\!' ../../../src/morphology/stems/nouns.lexc | grep '¢' | cut -d '¢' -f2 |cut -d ' ' -f1 > allnounlemmas

cat ANnounlemmas INnounlemmas plANnounlemmas plINnounlemmas  >> allnounlemmas
sort -u -o allnounlemmas allnounlemmas
cat noungenlemmas | grep '[a-z]' | sort -u > sortnoungenlemmas

# Compare the list of lemmas with the list of generated lemmas
comm -23 allnounlemmas sortnoungenlemmas > missingnouns.txt
rm noungenlemmas depgenlemmas ANnounlemmas INnounlemmas plINnounlemmas plANnounlemmas


open missingnouns.txt

